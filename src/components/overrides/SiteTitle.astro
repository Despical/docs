---
import { Image } from "astro:assets";
const { siteTitle, siteTitleHref } = Astro.locals.starlightRoute;

const SPECIAL_LOGOS = {
    '/easter-eggs': { filenameLight: 'easter-eggs-light.svg', filenameDark: 'easter-eggs-dark.svg', isCircle: false }
};

const DEFAULT_FILENAME_LIGHT = 'despical-light.png';
const DEFAULT_FILENAME_DARK = 'despical-dark.png';
const DEFAULT_IS_CIRCLE = true;

let currentLogo = {
    filenameLight: DEFAULT_FILENAME_LIGHT,
    filenameDark: DEFAULT_FILENAME_DARK,
    isCircle: DEFAULT_IS_CIRCLE
};

const { pathname } = Astro.url;

for (const endpoint of Object.keys(SPECIAL_LOGOS)) {
    if (pathname.startsWith(endpoint)) {
        currentLogo = SPECIAL_LOGOS[endpoint as keyof typeof SPECIAL_LOGOS];
        break;
    }
}

const lightSource = "/src/assets/" + currentLogo.filenameLight;
const darkSource = "/src/assets/" + currentLogo.filenameDark;
const logoClass = currentLogo.isCircle ? "circle-logo" : "";
---

<a href={siteTitleHref} class="site-title sl-flex">
    <Image
            width="96"
            height="96"
            class:list={["light:sl-hidden print:hidden", logoClass]}
            alt="Logo (Light)"
            src={lightSource}
    />
    <Image
            width="96"
            height="96"
            class:list={["dark:sl-hidden print:block", logoClass]}
            alt="Logo (Dark)"
            src={darkSource}
    />
    <span class="sr-only notranslate" translate="no">{siteTitle}</span>
</a>

<style>
    .site-title {
        align-items: center;
        gap: var(--sl-nav-gap);
        font-size: var(--sl-text-h4);
        font-weight: 600;
        color: var(--sl-color-text-accent);
        text-decoration: none;
        white-space: nowrap;
    }

    img {
        height: calc(var(--sl-nav-height) - 2 * var(--sl-nav-pad-y));
        width: auto;
        max-width: 100%;
        object-fit: contain;
        object-position: 0 50%;
    }

    .circle-logo {
        border-radius: 50%;
    }
</style>