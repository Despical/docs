---
import { Image } from "astro:assets";
import despicalLight from "../../assets/despical-light.png";
import despicalDark from "../../assets/despical-dark.png";
import easterLight from "../../assets/easter-eggs-light.svg";
import easterDark from "../../assets/easter-eggs-dark.svg";

const LOGO_MAP = {
    default: { light: despicalLight, dark: despicalDark, circle: true },
    "/easter-eggs": { light: easterLight, dark: easterDark, circle: false }
};


const { pathname } = Astro.url;
const cleanPath = pathname.replace(/^\/docs/, "") || "/";
let current = LOGO_MAP.default;

for (const key of Object.keys(LOGO_MAP)) {
    if (cleanPath.startsWith(key) && key !== "default") {
        current = LOGO_MAP[key as keyof typeof LOGO_MAP];
        break;
    }
}

const { siteTitle, siteTitleHref } = Astro.locals.starlightRoute;
---

<a href={siteTitleHref} class="site-title sl-flex">
    <Image
            width="96"
            height="96"
            class:list={["light:sl-hidden print:hidden", current.circle ? "circle-logo" : ""]}
            alt="Logo (Light)"
            src={current.light}
    />
    <Image
            width="96"
            height="96"
            class:list={["dark:sl-hidden print:block", current.circle ? "circle-logo" : ""]}
            alt="Logo (Dark)"
            src={current.dark}
    />
    <span class="sr-only notranslate" translate="no">{siteTitle}</span>
</a>

<style>
    .site-title {
        align-items: center;
        gap: var(--sl-nav-gap);
        font-size: var(--sl-text-h4);
        font-weight: 600;
        color: var(--sl-color-text-accent);
        text-decoration: none;
        white-space: nowrap;
    }

    img {
        height: calc(var(--sl-nav-height) - 2 * var(--sl-nav-pad-y));
        width: auto;
        max-width: 100%;
        object-fit: contain;
        object-position: 0 50%;
    }

    .circle-logo {
        border-radius: 50%;
    }
</style>